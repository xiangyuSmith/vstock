!(function(b) {
    var c = {};

    b.fn.address = function(h) {
        c = h;
    };

    b.fn.Address = function(k) {
        var F = b.extend({
                callback: function() {}
            },
            k);
        b(this).bind("click",
            function() {
                l.css("display", "block")
            });
        var l = b("<div>").attr("id", "city-select");
        b(this).after(l);
        var i = b("<div>").attr("id", "city-select-tab");
        l.append(i);
        var t = b("<a>").attr("href", "javascript:void(0);").addClass("current").attr("id", "tab_province").html("省份");
        var H = b("<a>").attr("href", "javascript:void(0);").attr("id", "tab_city").html("城市");
        var e = b("<a>").attr("href", "javascript:void(0);").attr("id", "tab_district").html("县区");
        var s = b("<a>").attr("href", "javascript:void(0);").attr("id", "tab_street").html("街道");
        i.append(t).append(H).append(e).append(s);
        var y = function() {
            b("#city-select-tab").find(".current").removeClass("current");
            b(this).addClass("current");
            b("#city-select-content").find(".current").removeClass("current");
            var j = b(this).attr("id");
            if (j == "tab_province") {
                b("#city-province").addClass("current")
            } else {
                if (j == "tab_city") {
                    b("#city-city").addClass("current")
                } else {
                    if (j == "tab_district") {
                        b("#city-district").addClass("current")
                    } else {
                        b("#city-street").addClass("current")
                    }
                }
            }
        };
        b("#city-select-tab").children("a").each(function(j, m) {
            b(this).bind("click", y)
        });
        var o = b("<div>").attr("id", "city-select-content");
        l.append(o);
        var g = function(j, J, m, p) {
            var K = b("<dl>");
            j.append(K);
            if (p) {
                var n = b("<dt>").html(J);
                K.append(n)
            }
            var M = b("<dd>");
            K.append(M);
            for (var q = 0; q < m.length; q++) {
                var L = b("<a>").html(m[q].n).attr("attr-id", m[q].i).attr("href", "javascript:void(0);").attr("title", m[q].n);
                L.bind("click", r);
                M.append(L)
            }
        };
        var r = function() {
            var K = parseInt(b(this).attr("attr-id"));
            var n = a(K);
            var p = b(this).closest(".city-wrapper");
            p.find(".selected").removeClass("selected");
            b(this).addClass("selected");
            var m = p.attr("id");
            var q = new Array();
            var J = new Array();
            b("#city-select-content").find(".selected").each(function(L, M) {
                q[L] = b(this).attr("title");
                J[L] = b(this).attr("attr-id")
            });
            if (m == "city-province") {
                h.html("");
                b("#tab_city").trigger("click");
                g(h, null, n, false);
                F.callback(q, J)
            } else {
                if (m == "city-city") {
                    C.html("");
                    b("#tab_district").trigger("click");
                    g(C, null, n, false);
                    F.callback(q, J)
                } else {
                    if (m == "city-district") {
                        w.html("");
                        b("#tab_street").trigger("click");
                        g(w, null, n, false);
                        F.callback(q, J)
                    } else {
                        F.callback(q, J);
                        l.css("display", "none")
                    }
                }
            }
        };
        var I = b("<div>").attr("class", "city-wrapper").attr("id", "city-province").addClass("current");
        o.append(I);
        var d = a(0);
        var E = new Array();
        var v = new Array();
        var z = new Array();
        var G = new Array();
        d.sort(function(m, j) {
            return m.s.charCodeAt() - j.s.charCodeAt()
        });
        var B = 0,
            A = 0,
            x = 0,
            u = 0;
        for (var D = 0; D < d.length; D++) {
            var f = d[D].s.charCodeAt();
            if (96 < f && f < 104) {
                E[B] = d[D];
                B++
            } else {
                if (103 < f && f < 108) {
                    v[A] = d[D];
                    A++
                } else {
                    if (107 < f && f < 116) {
                        z[x] = d[D];
                        x++
                    } else {
                        G[u] = d[D];
                        u++
                    }
                }
            }
        }
        g(I, "A-G", E, true);
        g(I, "H-K", v, true);
        g(I, "L-S", z, true);
        g(I, "T-Z", G, true);
        var h = b("<div>").attr("class", "city-wrapper").attr("id", "city-city");
        o.append(h);
        var C = b("<div>").attr("class", "city-wrapper").attr("id", "city-district");
        o.append(C);
        var w = b("<div>").attr("class", "city-wrapper").attr("id", "city-street");
        o.append(w)
    };

    var a = function(d) {
        return c[d]
    };

})(jQuery);